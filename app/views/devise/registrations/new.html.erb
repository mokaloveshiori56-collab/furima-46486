<div class='registration-main'>
  <h2 class='form-header-text'>新規登録</h2>

  <%# form_for を form_with に変更し、必要なオプションとモデルを渡します %>
  <%= form_with model: @user, url: user_registration_path, class: 'registration-form', local: true do |f| %>

    <%# Deviseのエラーメッセージ表示 %>
    <%= render "devise/shared/error_messages", resource: resource %>

    <%# ニックネーム %>
    <div class='form-group'>
      <div class='form-text-wrap'>
        <label class="form-text">ニックネーム</label>
        <span class="indispensable">必須</span>
      </div>
      <%= f.text_field :nickname, class:"input-default", id:"nickname", placeholder:"例) フリマ太郎" %>
    </div>

    <%# メールアドレス %>
    <div class='form-group'>
      <div class='form-text-wrap'>
        <label class="form-text">メールアドレス</label>
        <span class="indispensable">必須</span>
      </div>
      <%= f.email_field :email, class:"input-default", id:"email", placeholder:"PC・携帯どちらでも可", autofocus: true, autocomplete: "email" %>
    </div>

    <%# パスワード %>
    <div class='form-group'>
      <div class='form-text-wrap'>
        <label class="form-text">パスワード</label>
        <span class="indispensable">必須</span>
      </div>
      <%= f.password_field :password, class:"input-default", id:"password", placeholder:"6文字以上の半角英数字混合" %>
      <p class='info-text'>英字と数字をそれぞれ1文字以上含めてください</p>
    </div>

    <%# パスワード（確認用） %>
    <div class='form-group'>
      <div class='form-text-wrap'>
        <label class="form-text">パスワード（確認）</label>
        <span class="indispensable">必須</span>
      </div>
      <%= f.password_field :password_confirmation, class:"input-default", id:"password-confirmation", placeholder:"同じパスワードを入力してください", autocomplete: "new-password" %>
    </div>

    <%# 氏名 (全角) %>
    <div class='form-group'>
      <div class='form-text-wrap'>
        <label class="form-text">お名前(全角)</label>
        <span class="indispensable">必須</span>
      </div>
      <div class='input-name-wrap'>
        <%= f.text_field :first_name, class:"input-name", id:"first-name", placeholder:"例) 漢字" %>
        <%= f.text_field :last_name, class:"input-name", id:"last-name", placeholder:"例) 太郎" %>
      </div>
    </div>

    <%# 氏名カナ (全角カタカナ) %>
    <div class='form-group'>
      <div class='form-text-wrap'>
        <label class="form-text">お名前カナ(全角)</label>
        <span class="indispensable">必須</span>
      </div>
      <div class='input-name-wrap'>
        <%= f.text_field :first_name_kana, class:"input-name", id:"first-name-kana", placeholder:"例) カンジ" %>
        <%= f.text_field :last_name_kana, class:"input-name", id:"last-name-kana", placeholder:"例) タロウ" %>
      </div>
    </div>

    <%# 生年月日 %>
    <div class='form-group'>
      <div class='form-text-wrap'>
        <label class="form-text">生年月日</label>
        <span class="indispensable">必須</span>
      </div>
      <div class='input-birth-wrap'> <%# 日付選択部分のラッパーをdivで囲む %>
        <%= raw sprintf(
              f.date_select(
                :birth_date,
                class:'select-box',
                id:"birth-date",
                use_month_numbers: true,
                start_year: 1930,
                end_year: (Time.now.year - 5),
                default: Date.new(1989, 1, 1),
                date_separator: '%s'),
              "<p>年</p>", "<p>月</p>", "<p>日</p>"
            ) %>
      </div>
    </div>

    <%# 本人確認に関する注意書き %>
    <div class='registration-info'>
      <p class='info-text'>
        本人確認のため、一部情報のご入力にご協力をお願いいたします。<br>
        お名前・生年月日が本人確認情報と異なる場合はご利用いただけません。
      </p>
    </div>

    <%# 利用規約とプライバシーポリシーの同意（チェックボックスがない場合はテキストのみ） %>
    <div class='form-group'>
      <p class='terms-text'>
        「プライバシーポリシー」と「フリマ利用規約」に同意して新規登録へ
      </p>
    </div>

    <%# 会員登録ボタン %>
    <div class='register-btn-wrap'>
      <%= f.submit "会員登録" ,class:"register-btn" %>
    </div>

  <% end %> <%# form_with の終了 %>

  <%# 他の認証関連リンク (ログイン、パスワードリセットなど) %>
  <%= render "devise/shared/links" %>

</div> <%# registration-main の終了 %>